{% extends "base.html" %}
{% block page_title %}| My Notes{% endblock %}
{% block page_stylesheet %}
<!-- DataTables -->
<link rel="stylesheet" href="{{ url_for('static' , path='plugins/datatables-bs4/css/dataTables.bootstrap4.css') }}">
{% endblock %}
{% block page_breadcrumb %} My Notes{% endblock %}
{% block page_head_title %}My Notes{% endblock %}
{% block body %}
<!-- Main content -->

<section class="content">
  <div class="row">
    <div class="col-md-6 pad">
      <form action="/notes/direction" method="post" enctype="multipart/form-data">
        {{ form.csrf_token }}
        {{ form.limit(placeholder="Number of Notes") }}
        {{form.off_set(value=notes.config.off_set)}}

        <div class="btn-group">
          {% if notes.config.off_set==0 %}<button type="submit" class="btn btn-default" title="0 Prior" disabled>
            < < < </button>{%else%}<button name="btn-previous" type="submit" class="btn btn-default"
                title="{{notes.config.off_set}} Prior"><strong>
                  < < < </strong></button>{%endif%}
              {% if notes.config.qty - notes.config.off_set -notes.config.limit > 0 %}<button name="btn-next"
                type="submit" class="btn btn-default"
                title="{{notes.config.qty - notes.config.off_set}} Remaining"><strong>> >
                  ></strong></button>{%else%}<button name="btn-next" type="submit" class="btn btn-default"
                title="0 Remaining" disabled><strong>> > ></strong></button>{%endif%}
        </div>
      </form>
    </div>
  </div>
  <div class="row">
    {% for n in notes.notes %}
    <div class="col-md-3">
      <div class="card card-primary">
        <div class="card-header">
          <h3 class="card-title">{{n.mood}} | {{n.date_created.strftime('%Y-%m-%d %H:%M')}}</h3>
          <div class="card-tools">
            <button type="button" class="btn btn-tool" data-card-widget="collapse"><i class="fas fa-minus"></i>
            </button>
          </div>
          <!-- /.card-tools -->
        </div>
        <!-- /.card-header -->
        <div class="card-body">
          <dl>
            <dt><span><a href="/notes/{{n.id}}"><i class="fas fa-book-open"></i> Open</a></span></dt>
            <dt>Preview</dt>
            <dd>{{n.preview}}</dd>
            <dt>Tags</dt>
            <dd>{%for tags in n.tags%}
              {% for k,v in tags.items() %}
              {{k}},
              {%endfor%}
              {%endfor%}</dd>
            <dt>Sentiment Analysis</dt>
            <dd>Polarity: {{n.sentiment_polarity}}</dd>
            <dd>Subjectivity: {{n.sentiment_subjectivity}}</dd>
          </dl>
        </div>
        <!-- /.card-body -->
      </div>
      <!-- /.card -->
    </div>
    {% endfor %}
  </div>
  <!-- /.row -->
</section>
<!-- /.content -->
</div>
<!-- /.content-wrapper -->

{% endblock %}

{% block page_sidebar_content %}
<!-- blank and demo script adds page configuration example -->
<!-- <div class="p-3">
  <h5>Title</h5>
  <p>Sidebar content</p>
</div> -->
{% endblock %}
{% block page_scripts %}
<!-- page scripts-->
<!-- DataTables -->
<script src="{{ url_for('static' , path='plugins/datatables/jquery.dataTables.js') }}"></script>
<script src="{{ url_for('static' , path='plugins/datatables-bs4/js/dataTables.bootstrap4.js') }}"></script>
<!-- AdminLTE App -->

<!-- AdminLTE for demo purposes -->
<script src="{{ url_for('static' , path='dist/js/demo.js') }}"></script>
<!-- page script -->
<script>
  $(function () {

    $('#notes').DataTable({
      "order": [[0, "desc"]],
    });
  });
</script>
{% endblock %}